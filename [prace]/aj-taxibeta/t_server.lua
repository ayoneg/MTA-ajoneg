--[[
    By AjonEG <ajonoficjalny@gmail.com> @ 2021 (c)
	Wszelkie prawa zastrzeżone.
	
	Skrypt BETA pracy taxi.
]]--

--######################
-- PREMIA GLOBALNA
local global_premia = 0.1 -- [ nadaj 0.1 dla *10 więcej ]
local taxi_def_mn = 8
-- PREMIA GLOBALNA
--######################


local taxi_gps = {
-- LV
{2840.046875, 2217.2802734375, 10.387162208557},
{2899.73046875, 2406.2666015625, 10.407712936401},
{2636.3818359375, 2302.5849609375, 10.391414642334},
{2604.92578125, 2225.5048828125, 10.381888389587},
{2504.3818359375, 2241.5234375, 10.386896133423},
{2465.5654296875, 2243.0791015625, 10.384031295776},
{2430.509765625, 2379.703125, 10.231892585754},
{2290.05078125, 2421.3271484375, 10.388938903809},
{2189.044921875, 2460.8115234375, 10.322529792786},
{2087.376953125, 2484.4248046875, 10.647284507751},
{2020.3642578125, 2433.693359375, 10.390424728394},
{1921.865234375, 2318.9541015625, 10.414445877075},
{1935.609375, 2186.2724609375, 10.379183769226},
{1948.064453125, 2173.2509765625, 10.406177520752},
{1881.87890625, 2053.40625, 10.391074180603},
{1735.322265625, 2060.4404296875, 10.385029792786},
{1701.38671875, 1968.90234375, 10.38830947876},
{1614.08984375, 1822.1728515625, 10.394973754883},
{1671.31640625, 1813.0166015625, 10.3852891922},
{1654.8271484375, 1736.6455078125, 10.390804290771},
{1503.697265625, 1601.130859375, 10.391093254089},
{1705.1669921875, 1452.2236328125, 10.378096580505},
{1902.9453125, 1445.703125, 10.387167930603},
{1940.046875, 1348.7626953125, 8.826150894165},
{2034.7548828125, 1173.607421875, 10.39014339447},
{2033.2021484375, 1014.0283203125, 10.387505531311},
{2120.8212890625, 904.384765625, 10.387889862061},
{2262.326171875, 981.5478515625, 10.3860206604},
{2353.9443359375, 1027.34375, 10.37956237793},
{2468.103515625, 1006.609375, 10.384554862976},
{2485.2958984375, 925.8095703125, 10.394762992859},
{2636.8984375, 1123.4091796875, 10.385389328003},
{2534.619140625, 1341.2177734375, 10.389616966248},
{2560.046875, 1406.4609375, 10.398781776428},
{2488.1376953125, 1529.6845703125, 10.386170387268},
{2437.9228515625, 1651.689453125, 10.388396263123},
{2435.26953125, 1673.7841796875, 10.392663002014},
{2412.4072265625, 2029.98046875, 10.38777923584},
{2266.0703125, 2029.7177734375, 10.385610580444},
{2162.5205078125, 1988.8779296875, 10.38788318634},
{2033.1025390625, 1925.91796875, 11.853594779968},
{2036.2900390625, 1630.2578125, 10.389954566956},
{2036.1015625, 1552.20703125, 10.390445709229},
{1560.5302734375, 1066.6923828125, 10.403919219971},
{1560.271484375, 1002.3740234375, 10.381387710571},
{1572.3017578125, 739.021484375, 10.238551139832},
{1440.9892578125, 669.6875, 10.392200469971},
{1354.060546875, 699.775390625, 10.386257171631},
{1290.125, 911.46875, 6.4271197319031},
{1045.8671875, 1011.341796875, 10.56723690033},
{1022.1533203125, 1365.5693359375, 10.38920211792},
{1063.5439453125, 1349.3662109375, 10.367296218872},
{1013.6943359375, 1408.080078125, 10.402985572815},
{950.98046875, 1730.8017578125, 8.2158870697021},
{1047.3388671875, 1802.9326171875, 10.386301040649},
{1105.22265625, 1786.5615234375, 10.387277603149},
{1105.8212890625, 1786.06640625, 10.388343811035},
{1013.63671875, 1876.5927734375, 10.39098072052},
{998.931640625, 1983.19140625, 10.397624969482},
{1064.6435546875, 2045.84375, 10.387926101685},
{1148.3115234375, 2061.8076171875, 10.38841342926},
{1330.275390625, 2046.486328125, 10.384447097778},
{1499.619140625, 2059.2333984375, 10.388311386108},
{1533.677734375, 2107.443359375, 10.390696525574},
{1575.744140625, 2205.7060546875, 10.390518188477},
{1652.3125, 2265.4228515625, 10.38990688324},
{2791.4658203125, 1307.634765625, 10.525680541992},
{2832.689453125, 1386.5, 10.525907516479},
{2787.7783203125, 1453.337890625, 10.483751296997},
{2783.443359375, 904.4140625, 10.453555107117},
{2779.00390625, 919.65234375, 10.566771507263},
{2719.525390625, 841.7626953125, 10.602102279663},
{2601.505859375, 758.775390625, 10.571001052856},
{2592.109375, 755.625, 10.525032997131},
{2440.3203125, 655.400390625, 10.776803970337},
{2440.65234375, 697.880859375, 10.824821472168},
{2363.9658203125, 725.2119140625, 10.778936386108},
{2353.0234375, 702.7451171875, 10.65368938446},
{1962.8544921875, 700.1181640625, 10.524662971497},
{1880.8251953125, 717.21484375, 10.524878501892},
{1854.8076171875, 733.9697265625, 10.827776908875},
{1956.755859375, 767.697265625, 10.447842597961},
{897.6435546875, 1899.0341796875, 10.588779449463}, -- 138
{919.0517578125, 1907.861328125, 10.678672790527},
{918.4423828125, 1927.8173828125, 10.580274581909},
{894.4755859375, 1940.3671875, 10.943209648132},
{857.814453125, 1971.951171875, 11.384534835815},
{843.1845703125, 1951.5302734375, 10.582042694092},
{853.939453125, 1927.8505859375, 10.660063743591},
{850.919921875, 1906.32421875, 10.748712539673},
{853.6865234375, 1887.654296875, 10.692193031311},
{885.759765625, 1963.421875, 10.525141716003},
{920.1884765625, 1987.951171875, 10.798965454102},
{921.3994140625, 2021.0205078125, 10.841139793396},
{892.16015625, 1976.5029296875, 11.035717964172},
{1234.19140625, 2584.576171875, 10.525105476379},
{1264.521484375, 2604.0439453125, 10.526213645935},
{1344.4609375, 2604.677734375, 10.525909423828},
{1419.2158203125, 2576.1376953125, 10.525779724121},
{1442.4697265625, 2574.6298828125, 10.526637077332},
{1433.5107421875, 2609.21484375, 10.411402702332},
{1503.99609375, 2574.5537109375, 10.524159431458},
{1564.330078125, 2574.044921875, 10.525322914124},
{1599.451171875, 2603.849609375, 10.523413658142},
{1646.326171875, 2576.31640625, 10.525925636292},
{1667.1142578125, 2600.3193359375, 10.526168823242},
{1775.87109375, 2613.6142578125, 10.51228427887},
{1573.4150390625, 2667.888671875, 10.518229484558},
{1437.857421875, 2668.2275390625, 10.447249412537},
{1587.68359375, 2745.236328125, 10.523857116699},
{1600.623046875, 2719.5732421875, 10.526668548584},
{1624.240234375, 2717.7236328125, 10.527391433716},
{1661.568359375, 2747.271484375, 10.525907516479},
{1703.4384765625, 2699.5078125, 10.525721549988},
{1664.8408203125, 2835.818359375, 10.524509429932},
{1638.2978515625, 2809.1279296875, 10.524940490723},
{1602.755859375, 2836.4716796875, 10.526400566101},
{1588.72265625, 2806.2431640625, 10.524033546448},
{1551.7998046875, 2835.94921875, 10.525951385498},
{1462.091796875, 2774.115234375, 10.448722839355},
{2161.2080078125, 2790.125, 10.525105476379},
{2118.951171875, 2761.5341796875, 10.527389526367},
{2150.533203125, 2737.845703125, 10.688900947571},
{2206.9638671875, 2727.7119140625, 10.526502609253},
{2354.9912109375, 2719.271484375, 10.465926170349},
{2339.482421875, 2719.4228515625, 10.503486633301},
{2492.8330078125, 2765.8857421875, 10.524241447449},
{2493.3017578125, 2780.064453125, 10.526063919067},
{2352.1005859375, 2522.58203125, 10.685940742493},
{2385.3955078125, 2467.0390625, 10.524833679199},
-- FC i okolice
{408.205078125, 1152.9267578125, 7.8088622093201},
{587.654296875, 1220.974609375, 11.418988227844},
{715.3857421875, 1202.640625, 13.100515365601},
{312.5107421875, 1139.4716796875, 8.290961265564},
{181.072265625, 1166.283203125, 14.463537216187},
{8.5576171875, 1205.9833984375, 19.053483963013},
{1.19921875, 1179.1884765625, 19.15488243103},
{22.787109375, 1174.599609375, 19.133052825928},
{-29.32421875, 1206.1904296875, 19.063995361328},
{-19.171875, 1183.6376953125, 19.066516876221},
{-45.3369140625, 1121.4013671875, 19.757326126099},
{-41.998046875, 1089.1865234375, 19.495227813721},
{-18.357421875, 1111.7060546875, 19.720296859741},
{-2.15625, 1077.2158203125, 19.598405838013},
{-36.43359375, 1074.8740234375, 19.82592010498},
{-33.044921875, 1034.546875, 19.560209274292},
{-98.5712890625, 1085.7568359375, 19.447317123413},
{-182.4423828125, 1110.9677734375, 19.447954177856},
{-183.51953125, 1163.0966796875, 19.45107460022},
{-183.244140625, 1180.0791015625, 19.451383590698},
{-187.8603515625, 1206.1904296875, 19.399215698242},
{-209.24609375, 1205.517578125, 19.446901321411},
{-251.1904296875, 1177.9755859375, 19.864179611206},
{-265.5771484375, 1170.4814453125, 19.523433685303},
{-262.0556640625, 1151.0234375, 19.735860824585},
{-264.033203125, 1124.451171875, 19.609775543213},
{-298.904296875, 1111.1162109375, 19.603403091431},
{-359.73828125, 1111.6865234375, 19.771211624146},
{-330.96875, 1115.681640625, 19.945259094238},
{-356.919921875, 1135.36328125, 19.612934112549},
{-364.7880859375, 1164.89453125, 19.447269439697},
{-321.4912109375, 1164.5732421875, 19.960582733154},
{-321.576171875, 1128.546875, 19.72519493103},
{-287.4931640625, 1175.32421875, 19.628898620605},
{-252.1796875, 1053.28125, 19.754903793335},
{-270.958984375, 1005.138671875, 19.790384292603},
{-248.03515625, 1004.833984375, 19.730613708496},
{-213.654296875, 978.58984375, 19.033895492554},
{-142.0205078125, 934.123046875, 19.223424911499},
{-91.6748046875, 915.728515625, 20.716705322266},
{-52.7587890625, 898.279296875, 21.698230743408},
{-14.517578125, 929.2646484375, 20.784194946289},
{33.53515625, 921.5322265625, 23.297525405884},
{23.826171875, 972.56640625, 19.390501022339},
{-9.59375, 977.021484375, 19.557153701782},
{-84.64453125, 1379.0703125, 9.9782381057739},
{-31.9296875, 1365.86328125, 8.9170522689819},
{-16.2626953125, 1384.4228515625, 8.8767976760864},
{-94.5712890625, 1519.2880859375, 14.986356735229},
{657.681640625, 1720.95703125, 6.6980423927307},
{693.1259765625, 1948.5849609375, 5.2457857131958}, -- 133
{754.7607421875, 1955.8056640625, 5.0417628288269},
{789.1337890625, 1987.171875, 5.045431137085},
{768.501953125, 2002.44921875, 5.3192663192749},
{798.7666015625, 1687.5283203125, 4.9852824211121},

-- PC i okolice
{2541.62890625, 58.2880859375, 26.189586639404},
{2541.3203125, 94.2197265625, 26.188972473145},
{2537.669921875, 117.5517578125, 26.19252204895},
{2515.9462890625, 119.6181640625, 26.188533782959},
{2482.029296875, 118.8935546875, 26.18835067749},
{2457.10546875, 119.0986328125, 26.180080413818},
{2456.2255859375, 92.34765625, 26.188493728638},
{2470.998046875, 72.7216796875, 26.181781768799},
{2479.765625, 104.6162109375, 26.189167022705},
{2515.94140625, 104.3349609375, 26.190557479858},
{2541.6220703125, 2.2490234375, 26.190563201904},
{2515.90234375, -13.8310546875, 26.113458633423},
{2489.142578125, -2.1318359375, 26.189647674561},
{2446.705078125, -21.6884765625, 26.188772201538},
{2437.986328125, -38.033203125, 26.235946655273},
{2417.3837890625, -36.029296875, 26.190090179443},
{2384.591796875, -12.6611328125, 26.230480194092},
{2400.484375, 16.037109375, 26.18853187561},
{2410.71484375, 49.060546875, 26.188159942627},
{2402.451171875, 98.5595703125, 26.179191589355},
{2334.767578125, 121.953125, 26.218124389648},
{2353.01953125, 143.0498046875, 26.208662033081},
{2351.158203125, 185.6826171875, 26.174209594727},
{2335.9775390625, 197.8115234375, 26.205564498901},
{2286.8193359375, 64.46484375, 26.189861297607},
{2297.9140625, -110.666015625, 26.368942260742},
{2273.98046875, -106.572265625, 26.181859970093},
{2252.03515625, -105.833984375, 26.182807922363},
{2215.0166015625, -87.9375, 26.20892906189},
{2213.8095703125, -63.103515625, 26.229654312134},
{2215.525390625, -41.5634765625, 26.190721511841},
{2240.806640625, -17.5302734375, 26.263715744019},
{2293.1044921875, 149.4765625, 26.185455322266},
{2232.5556640625, 152.65625, 26.264949798584},
{2215.41796875, 114.41796875, 26.188154220581},
{2215.888671875, 57.953125, 26.188203811646},
{2359.611328125, -654.6201171875, 127.79521179199},
-- Las Paysadas i okolice
{-250.1455078125, 2610.267578125, 62.563579559326},
{-173.46484375, 2707.185546875, 62.301280975342},
{-176.0224609375, 2727.228515625, 62.353523254395},
{-158.3154296875, 2757.322265625, 62.324234008789},
{-222.103515625, 2763.6201171875, 62.373683929443},
{-254.36328125, 2775.8984375, 62.09712600708},
{-281.09765625, 2760.896484375, 61.932041168213},
{-304.947265625, 2727.8564453125, 62.0729637146},
{-289.4453125, 2694.291015625, 62.391674041748},
{-319.5263671875, 2676.4619140625, 62.344524383545},
{-228.1767578125, 2705.244140625, 62.315074920654},
{405.291015625, 2543.01171875, 16.228273391724},
{428.2919921875, 2536.76171875, 16.115550994873},
{540.75, 2364.830078125, 30.540803909302},
-- Tierra Robada Las Barrancas
{-711.69140625, 946.9501953125, 12.0709400177},
{-841.009765625, 1429.021484375, 13.45604801178},
{-825.1611328125, 1486.6484375, 18.552572250366},
{-797.6767578125, 1497.33203125, 21.516143798828},
{-774.9990234375, 1486.599609375, 23.805200576782},
{-751.8583984375, 1578.380859375, 26.740852355957},
{-795.9775390625, 1626.533203125, 26.828834533691},
{-814.908203125, 1571.3251953125, 26.823341369629},
{-854.578125, 1541.2958984375, 22.405067443848},
{-716.974609375, 1452.2119140625, 18.202369689941},
{-684.5693359375, 1454.0146484375, 16.975158691406},
{-656.2490234375, 1455.1123046875, 13.319378852844},
{-641.03125, 1455.2880859375, 13.321974754333},
{-932.9873046875, 1423.1826171875, 29.828630447388},
{-900.794921875, 1514.8515625, 25.467433929443},
{-898.0439453125, 1534.64453125, 25.463663101196},
{-884.083984375, 1545.6240234375, 25.620050430298},
{-887.6201171875, 1560.150390625, 25.626804351807},
{-1046.5078125, 1542.9326171875, 32.785621643066},
{-1491.9609375, 1958.2353515625, 48.051952362061},
{-1477.9736328125, 1873.6435546875, 32.338722229004},
{-1423.021484375, 2160.90625, 48.468467712402},
{-1347.71484375, 2057.1708984375, 52.382759094238},
-- TR okolice
{-1208.7177734375, 1826.5888671875, 41.422294616699},
{-671.9912109375, 2073.3779296875, 59.985607147217},
{-592.185546875, 2021.84375, 59.891822814941},
{-366.8076171875, 2221.595703125, 42.195343017578},
{-390.86328125, 2247.2685546875, 42.038494110107},
{-381.544921875, 2260.2763671875, 42.123184204102},
{-379.9423828125, 2208.19140625, 41.930450439453},
{-302.6552734375, 1757.9873046875, 42.392192840576},
{-318.421875, 1313.37109375, 52.980194091797},
{-329.2158203125, 1530.2822265625, 75.062644958496},
{-309.03515625, 1533.4267578125, 75.11393737793},
-- Bayside
{-2277.369140625, 2286.720703125, 4.6731290817261},
{-2239.7001953125, 2349.841796875, 4.7014427185059},
{-2432.7333984375, 2342.326171875, 4.6863765716553},
{-2475.2333984375, 2320.4619140625, 4.6895666122437},
{-2459.390625, 2255.3779296875, 4.6414070129395},
{-2520.6083984375, 2262.9052734375, 4.685601234436},
{-2548.494140625, 2276.7294921875, 4.6905636787415},
{-2568.443359375, 2304.1240234375, 4.6899728775024},
{-2619.591796875, 2292.361328125, 7.9154276847839},
{-2620.8505859375, 2317.9560546875, 7.9891276359558},
{-2619.72265625, 2348.7685546875, 8.1603307723999},
{-2618.26953125, 2401.3583984375, 11.55477142334},
{-2610.14453125, 2360.6103515625, 8.4923944473267},
{-2487.0078125, 2405.037109375, 15.890563011169},
{-2477.310546875, 2437.1240234375, 15.660889625549},
{-2424.5400390625, 2439.88671875, 12.809189796448},
{-2384.419921875, 2433.6513671875, 9.2538919448853},
{-2354.4580078125, 2416.896484375, 6.7846322059631},
{-2432.0791015625, 2486.9912109375, 13.444165229797},
{-2449.9228515625, 2502.892578125, 14.977131843567},
{-2477.2734375, 2498.048828125, 17.343683242798},
-- El Quabrados i okolice
{-1662.70703125, 2484.7138671875, 86.845825195312},
{-1659.0380859375, 2545.7900390625, 85.070960998535},
{-1656.48828125, 2597.1396484375, 81.116661071777},
{-1936.53125, 2381.8134765625, 49.200675964355},
{-1556.1396484375, 2699.0419921875, 55.482791900635},
{-1562.0751953125, 2711.990234375, 55.504623413086},
{-1558.47265625, 2648.5888671875, 55.486061096191},
{-1557.9091796875, 2627.4521484375, 55.491744995117},
{-1530.4375, 2596.015625, 55.486156463623},
{-1510.6181640625, 2607.8154296875, 55.540988922119},
{-1481.3583984375, 2595.8896484375, 55.478477478027},
{-1451.05859375, 2607.025390625, 55.503002166748},
{-1399.279296875, 2639.8583984375, 55.392799377441},
{-1440.314453125, 2663.0751953125, 55.541473388672},
{-1472.724609375, 2690.7646484375, 55.504379272461},
{-1491.908203125, 2681.603515625, 55.497501373291},
{-1502.923828125, 2639.1728515625, 55.542156219482},
{-1481.958984375, 2558.4755859375, 55.480068206787},
{-1486.09375, 2547.16015625, 55.483558654785},
{-1514.6572265625, 2530.94140625, 55.397468566895},
{-1539.423828125, 2563.8896484375, 55.543479919434},
{-1318.283203125, 2697.193359375, 49.766666412354},
{-1263.876953125, 2711.81640625, 49.770332336426},
{-839.6015625, 2738.8203125, 45.39489364624},
{-776.4794921875, 2746.0537109375, 45.409549713135},
{-768.765625, 2759.634765625, 45.46704864502},
{-744.451171875, 2751.91015625, 46.945190429688},
{-541.9521484375, 2589.56640625, 53.168239593506},
{-541.5537109375, 2598.6005859375, 53.170085906982},
{-541.9521484375, 2589.56640625, 53.168239593506},
{-541.5537109375, 2598.6005859375, 53.170085906982},
-- blueberry i okolice
{182.1259765625, -77.6708984375, 1.2070372104645},
{238.16015625, -88.2763671875, 1.2002054452896},
{238.0673828125, -121.8427734375, 1.2066248655319},
{182.970703125, -139.4677734375, 1.2636705636978},
{175.4541015625, -150.375, 1.280928850174},
{193.3271484375, -204.86328125, 1.2824290990829},
{214.9091796875, -217.2822265625, 1.203063249588},
{280.21484375, -217.2109375, 1.2045116424561},
{288.609375, -196.51171875, 1.2435702085495},
{276.287109375, -158.8564453125, 1.2363593578339},
{325.333984375, -127.69921875, 1.2823288440704},
{325.5263671875, -87.056640625, 1.283414721489},
{338.4619140625, -72.7412109375, 1.2221984863281},
{374.7021484375, -81.212890625, 1.1105194091797},
{290.681640625, -64.62890625, 1.2825249433517},
{270.3017578125, -65.5048828125, 1.2844016551971},
{240.53515625, -30.2880859375, 1.2835793495178},
{247.0517578125, -20.107421875, 1.3410266637802},
{222.939453125, 16.521484375, 2.2833051681519},
{37.1318359375, -185.8056640625, 1.3594216108322},
{-242.7021484375, -249.4130859375, 1.1357480287552},
{-201.5537109375, -300.00390625, 1.1348365545273},
{-180.625, -319.3056640625, 1.1320677995682},
-- montogomery i okolice
{1242.1953125, 200.228515625, 19.215719223022},
{1234.9326171875, 234.595703125, 19.220476150513},
{1234.4375, 356.736328125, 19.260507583618},
{1251.1708984375, 348.333984375, 19.184206008911},
{1246.755859375, 333.7861328125, 19.259819030762},
{1279.251953125, 323.9580078125, 19.183992385864},
{1281.279296875, 368.0751953125, 19.184141159058},
{1339.669921875, 379.048828125, 19.263000488281},
{1367.0224609375, 407.400390625, 19.338108062744},
{1373.00390625, 294.611328125, 19.184158325195},
{1399.9794921875, 283.0458984375, 19.183828353882},
{1410.9521484375, 264.296875, 19.179777145386},
{1398.18359375, 236.564453125, 19.184118270874},
{1361.076171875, 210.6552734375, 19.259159088135},
{1359.326171875, 251.763671875, 19.270626068115},
-- Dillimore
{668.0458984375, -467.173828125, 16.040903091431},
{680.6064453125, -478.9130859375, 16.040111541748},
{695.3251953125, -494.560546875, 16.041372299194},
{720.1279296875, -472.6591796875, 16.049324035645},
{716.771484375, -498.91796875, 15.955190658569},
{734.720703125, -535.369140625, 15.963526725769},
{763.1787109375, -535.2431640625, 15.964454650879},
{794.970703125, -523, 16.04479598999},
{769.53125, -524.2578125, 15.966389656067},
{744.2353515625, -524.2568359375, 15.965069770813},
{797.763671875, -544.1376953125, 16.00546836853},
{825.7470703125, -577.0283203125, 15.999669075012},
{730.4853515625, -589.6064453125, 16.038467407227},
{675.3271484375, -627.998046875, 16.040554046631},
{612.0771484375, -587.2314453125, 16.930452346802},
{635.9453125, -572.544921875, 15.953995704651},
{648.2353515625, -523.169921875, 16.046489715576},
{1101.373046875, -298.716796875, 73.696952819824},
{1107.625, -312.7412109375, 73.697204589844},
-- LS i okolice
{1241.8046875, -2037.001953125, 59.901901245117},
{1569.1142578125, -1878.75390625, 13.40456199646},
{1743.228515625, -1860.705078125, 13.353056907654},
{1871.5166015625, -1926.7529296875, 13.320061683655},
{1876.7783203125, -2020.494140625, 13.401134490967},
{1762.62109375, -2107.3388671875, 13.319803237915},
{1773.9873046875, -2118.51953125, 13.325257301331},
{1729.5771484375, -2118.3740234375, 13.322780609131},
{1686.921875, -2107.0908203125, 13.321862220764},
{1823.0810546875, -2016.892578125, 13.367622375488},
{1967.2861328125, -2043.2197265625, 13.328689575195},
{2087.51171875, -1805.2998046875, 13.323684692383},
{2075.4716796875, -1773.14453125, 13.410349845886},
{1892.609375, -1728.98828125, 13.351916313171},
{1893.1416015625, -1670.0048828125, 13.352898597717},
{1864.9765625, -1606.6943359375, 13.324879646301},
{1870.716796875, -1635.85546875, 13.355478286743},
{1870.2900390625, -1694.5048828125, 13.355467796326},
{1870.640625, -1729.89453125, 13.350271224976},
{1995.8955078125, -1710.2470703125, 13.322793006897},
{2007.3447265625, -1738.08984375, 13.327963829041},
{2011.2216796875, -1606.6611328125, 13.294010162354},
{2071.87890625, -1606.533203125, 13.316821098328},
{2076.2314453125, -1703.2314453125, 13.324938774109},
{2180.197265625, -1703.6748046875, 13.399726867676},
{2280.91015625, -1653.376953125, 14.977123260498},
{2336.8515625, -1683.2734375, 13.305687904358},
{2393.6708984375, -1653.3427734375, 13.322701454163},
{2484.31640625, -1653.0712890625, 13.261213302612},
{2494.3623046875, -1684.359375, 13.259546279907},
{2401.6728515625, -1726.8173828125, 13.329154014587},
{2336.3681640625, -1755.0205078125, 13.328247070312},
{2261.80859375, -1754.9306640625, 13.324238777161},
{2242.0302734375, -1888.890625, 13.294595718384},
{2319.4150390625, -1913.57421875, 13.378244400024},
{2440.9228515625, -2015.4482421875, 13.285666465759},
{2508.6865234375, -2015.173828125, 13.276630401611},
{2370.8427734375, -2283.0224609375, 13.318325042725},
{2209.6357421875, -2501.1220703125, 13.318529129028},
{2490.478515625, -2631.9892578125, 13.405728340149},
{2702.9755859375, -2509.791015625, 13.422235488892},
{2755.4443359375, -2448.8251953125, 13.41178894043},
{2511.564453125, -1937.87109375, 13.31316947937},
{2473.2421875, -1926.751953125, 13.291069984436},
{2408.19921875, -1908.900390625, 13.323057174683},
{2763.6953125, -1978.927734375, 13.327948570251},
{2775.072265625, -1971.1572265625, 13.293997764587},
{2697.0078125, -1998.5732421875, 13.271070480347},
{2674.2255859375, -2009.7353515625, 13.327627182007},
{2719.9443359375, -2026.169921875, 13.291262626648},
{2816.8564453125, -1952.46484375, 10.956267356873},
{2857.46484375, -1534.779296875, 10.863656997681},
{2743.5107421875, -1621.7294921875, 12.79002571106},
{2571.744140625, -1449.9638671875, 34.777603149414},
{2456.7421875, -1402.083984375, 23.726934432983},
{2456.697265625, -1331.494140625, 23.773790359497},
{2456.982421875, -1287.6357421875, 23.844488143921},
{2417.0361328125, -1249.373046875, 23.672788619995},
{2365.3427734375, -1258.6025390625, 23.7802734375},
{2376.9521484375, -1326.7509765625, 23.807302474976},
{2424.9345703125, -1509.794921875, 23.841463088989},
{2529.8720703125, -1498.8525390625, 23.767658233643},
{2358.87890625, -1529.9755859375, 23.770009994507},
{2299.20703125, -1490.671875, 23.245826721191},
{2246.80078125, -1478.3203125, 23.18794631958},
{2206.91015625, -1457.2412109375, 23.752393722534},
{2244.8369140625, -1412.181640625, 23.766178131104},
{2192.5712890625, -1378.60546875, 23.772901535034},
{2135.0849609375, -1418.298828125, 23.764862060547},
{1995.142578125, -1452.7490234375, 13.415499687195},
{1841.1728515625, -1418.3369140625, 13.332025527954},
{1757.4736328125, -1450.2529296875, 13.404326438904},
{1688.9677734375, -1446.921875, 13.430147171021},
{1519.5146484375, -1446.6162109375, 13.320657730103},
{1440.1591796875, -1501.865234375, 13.316798210144},
{1524.177734375, -1681.3779296875, 13.322826385498},
{1722.474609375, -1726.6005859375, 13.323405265808},
{1683.935546875, -1639.2978515625, 13.319665908813},
{1480.9033203125, -1738.02734375, 13.3219165802},
{1360.0361328125, -1738.080078125, 13.312622070312},
{1254.919921875, -1706.5302734375, 13.318471908569},
{1228.64453125, -1846.583984375, 13.323168754578},
{1085.1337890625, -1846.474609375, 13.326083183289},
{923.1083984375, -1723.2373046875, 13.323606491089},
{911.84765625, -1648.626953125, 13.322648048401},
{911.953125, -1503.8681640625, 13.312851905823},
{1033.0341796875, -1547.4091796875, 13.305521011353},
{1127.87890625, -1411.4970703125, 13.390716552734},
{958.0830078125, -1389.8173828125, 13.155563354492},
{911.888671875, -1453.8427734375, 13.328858375549},
{877.8701171875, -1569.96875, 13.324669837952},
{821.9912109375, -1621.64453125, 13.318534851074},
{804.3896484375, -1734.2294921875, 13.380653381348},
{757.42578125, -1652.107421875, 4.6705856323242},
{767.8408203125, -1563.0712890625, 13.322397232056},
{789.52734375, -1465.7509765625, 13.324670791626},
{815.65625, -1389.89453125, 13.394993782043},
{923.2822265625, -1353.6875, 13.128318786621},
{960.2529296875, -1314.5908203125, 13.304342269897},
{805.4423828125, -1334.7802734375, 13.380437850952},
{776.7998046875, -1325.91796875, 13.363845825195},
{664.9248046875, -1313.6171875, 13.322150230408},
{619.455078125, -1327.453125, 13.546032905579},
{578.85546875, -1393.83984375, 13.914910316467},
{676.07421875, -1411.2958984375, 13.353665351868},
{739.36328125, -1411.44140625, 13.30690574646},
{573.2587890625, -1577.2138671875, 15.948440551758},
{483.7978515625, -1533.90625, 19.274780273438},
{501.2041015625, -1355.7392578125, 16.018321990967},
{411.6455078125, -1491.1669921875, 30.992498397827},
{340.8076171875, -1525.2509765625, 33.148193359375},
{288.4140625, -1632.1318359375, 33.099639892578},
{375.16796875, -1902.2314453125, 7.6105256080627},
{645.490234375, -1654.9970703125, 14.805618286133},
{482.998046875, -1280.1982421875, 15.409760475159},
{401.21484375, -1254.1767578125, 51.979965209961},
{289.509765625, -1257.5322265625, 73.303741455078},
{323.5546875, -1190.8408203125, 76.126441955566},
{398.318359375, -1164.0625, 78.639213562012},
{621.107421875, -1102.541015625, 46.544002532959},
{688.7490234375, -1053.6103515625, 49.932415008545},
{800.88671875, -878.6806640625, 59.565765380859},
{855.6181640625, -894.0390625, 64.902908325195},
{871.1220703125, -866.99609375, 77.364418029785},
{1076.2001953125, -777.1494140625, 107.46936035156},
{1465.2802734375, -729.419921875, 92.963035583496},
{1465.2099609375, -885.4677734375, 55.986850738525},
{1376.8115234375, -864.4775390625, 40.718029022217},
{1220.01171875, -927.4609375, 42.594394683838},
{1026.0546875, -971.97265625, 42.273406982422},
{2053.1708984375, -972.7119140625, 45.215572357178},
{2253.921875, -1041.9892578125, 52.87621307373},
{2431.478515625, -1040.626953125, 53.630432128906},
{2636.865234375, -1083.533203125, 69.399925231934},
{2714.234375, -1265.7880859375, 59.601890563965},
{2231.5927734375, -1295.0888671875, 23.763711929321},
{2107.576171875, -1226.6806640625, 23.744630813599},
{2208.1982421875, -1226.5625, 23.746036529541},
{2309.181640625, -1224.9365234375, 23.807279586792},
{2234.5771484375, -1143.365234375, 25.565370559692},
{2125.1787109375, -1117.1474609375, 25.116271972656},
{2000.412109375, -1129.9677734375, 25.271291732788},
{1894.2314453125, -1130.2255859375, 24.118579864502},
{1542.4833984375, -1166.3779296875, 23.849300384521},
{1460.4921875, -1264.29296875, 13.327405929565},
{1363.1982421875, -1278.9912109375, 13.324028015137},
-- SF city
{-1704.7275390625, 1338.9541015625, 6.8854942321777},
{-2372.5654296875, 1335.5888671875, 12.25288772583},
{-2361.2158203125, 1233.6689453125, 31.605726242065},
{-2487.29296875, 1200.388671875, 36.61092376709},
{-2449.939453125, 1268.201171875, 27.444999694824},
{-2461.3046875, 1332.1201171875, 10.047758102417},
{-2621.7421875, 1406.7998046875, 6.8036975860596},
{-2886.5986328125, 1169.44140625, 11.085830688477},
{-2886.89453125, 1070.1552734375, 30.946325302124},
{-2867.2568359375, 996.9599609375, 39.916675567627},
{-2828.8564453125, 879.4755859375, 43.684093475342},
{-2840.7001953125, 695.2470703125, 23.386068344116},
{-2755.4111328125, 375.6787109375, 3.9391720294952},
{-2657.44140625, 376.2265625, 3.9371962547302},
{-2666.9287109375, 282.904296875, 3.9040884971619},
{-2711.548828125, 198.2900390625, 3.9563455581665},
{-2675.5390625, 212.0341796875, 3.957168340683},
{-2641.5439453125, 248.1484375, 3.9556245803833},
{-2544.4404296875, 319.4228515625, 19.224325180054},
{-2504.5830078125, 453.294921875, 27.551588058472},
{-2432.84765625, 492.5634765625, 29.632917404175},
{-2588.17578125, 574.1728515625, 14.2392578125},
{-2612.451171875, 760.4375, 36.907829284668},
{-2644.3330078125, 816.3486328125, 49.596240997314},
{-2756.4794921875, 788.5390625, 53.448970794678},
{-2660.955078125, 894.8896484375, 79.296005249023},
{-2518.3623046875, 1124.19140625, 55.355564117432},
{-2521.0283203125, 989.7021484375, 77.927597045898},
{-2360.287109375, 1008.5634765625, 50.402774810791},
{-2274.572265625, 1066.7666015625, 81.333618164062},
{-2152.0908203125, 1048.4140625, 79.626892089844},
{-2064.4169921875, 955.5390625, 59.178764343262},
{-2033.669921875, 951.958984375, 48.231285095215},
{-2012.7041015625, 997.9873046875, 50.238414764404},
{-2521.0283203125, 989.7021484375, 77.927597045898},
{-2360.287109375, 1008.5634765625, 50.402774810791},
{-2274.572265625, 1066.7666015625, 81.333618164062},
{-2152.0908203125, 1048.4140625, 79.626892089844},
{-2064.4169921875, 955.5390625, 59.178764343262},
{-2033.669921875, 951.958984375, 48.231285095215},
{-2012.7041015625, 997.9873046875, 50.238414764404},
{-2443.568359375, 748.076171875, 34.795928955078},
{-2600.94921875, 328.09375, 3.9603424072266},
{-2803.3828125, 133.8779296875, 6.8064346313477},
{-2803.28515625, 21.140625, 6.8089742660522},
{-2803.3125, -122.009765625, 6.8099141120911},
{-2725.5732421875, -314.005859375, 6.8137965202332},
{-2609.4560546875, -188.8583984375, 3.960911989212},
{-2609.4013671875, -109.7568359375, 3.961062669754},
{-2700.6484375, -6.6572265625, 4.0333247184753},
{-2598.7099609375, 9.6884765625, 3.9605739116669},
{-2506.982421875, -20.765625, 25.389728546143},
{-2426.9736328125, -106.7705078125, 34.948612213135},
{-2454.1640625, 135.7998046875, 34.669994354248},
{-2417.865234375, 333.6474609375, 34.823505401611},
{-2284.685546875, 558.0869140625, 34.795028686523},
{-1969.72265625, 294.291015625, 34.876468658447},
{-1984.6416015625, 143.8544921875, 27.394195556641},
{-2012.9033203125, 74.6318359375, 27.788522720337},
{-2093.1630859375, 17.39453125, 35.011352539062},
{-2026.2109375, -99.2158203125, 34.868907928467},
{-2028.0087890625, -54.7451171875, 35.056076049805},
{-2126.87109375, -77.08203125, 34.879611968994},
{-2310.7548828125, -183.8046875, 34.913028717041},
{-2263.0576171875, 163.7734375, 34.992782592773},
{-2246.2646484375, 252.7763671875, 34.944965362549},
{-2200.2724609375, 314.6533203125, 34.9485206604},
{-2152.4365234375, 252.033203125, 34.949287414551},
{-2140.8671875, 211.734375, 34.954540252686},
{-2091.43359375, 84.68359375, 35.015247344971},
{-2032.8125, 147.7177734375, 28.53977394104},
{-1939.5517578125, 234.408203125, 33.904064178467},
{-1826.3916015625, -10.7421875, 14.821548461914},
{-1807.044921875, -131.0078125, 5.5803437232971},
{-1715.4814453125, -66.845703125, 3.2601914405823},
{-1840.998046875, -108.7353515625, 5.3541402816772},
{-1854.9990234375, -169.7734375, 8.9149408340454},
{-1828.7890625, -176.5810546875, 9.080002784729},
{-1868.9521484375, -216.326171875, 18.081514358521},
{-1427.37109375, -291.69921875, 13.776374816895},
{-1954.431640625, -854.0751953125, 31.82738494873},
{-1978.23828125, -1014.87890625, 31.877767562866},
{-2485.2587890625, -615.267578125, 132.26890563965},
-- okolice SF AngelPine ETC
{-2406.3291015625, -2187.7333984375, 32.992374420166},
{-2195.9306640625, -2257.16796875, 30.384044647217},
{-2174.7958984375, -2259.5029296875, 30.330713272095},
{-2095.6337890625, -2262.671875, 30.330907821655},
{-2081.216796875, -2308.03125, 30.329719543457},
{-2167.0283203125, -2321.83984375, 30.329650878906},
{-2212.732421875, -2409.3427734375, 30.323963165283},
{-2224.9267578125, -2427.2119140625, 30.373403549194},
{-2226.7294921875, -2469.8974609375, 30.329206466675},
{-2194.208984375, -2497.37890625, 30.320724487305},
{-2186.0283203125, -2483.1572265625, 30.330255508423},
{-2236.533203125, -2560.86328125, 31.627941131592},
{-2150.521484375, -2531.7939453125, 30.323133468628},
{-2120.533203125, -2511.54296875, 30.330196380615},
{-2078.666015625, -2547.8330078125, 30.331254959106},
{-2071.9384765625, -2558.7822265625, 30.336256027222},
{-2045.5654296875, -2558.25, 30.332967758179},
{-2027.017578125, -2540.611328125, 30.329744338989},
{-2070.349609375, -2526.931640625, 30.33066368103},
{-2073.203125, -2492.859375, 30.333108901978},
{-2097.9228515625, -2329.220703125, 30.330728530884},
{-2106.779296875, -2342.1142578125, 30.329216003418},
{-1625.509765625, -2695.0703125, 48.243572235107},
{-1571.42578125, -2728.6357421875, 48.34449005127},
{16.1025390625, -2648.7392578125, 40.117652893066},
{-35.9482421875, -2512.45703125, 35.869918823242},
{-284.158203125, -2174.4248046875, 28.37536239624},
{-582.6298828125, -1477.380859375, 11.233720779419},
{-377.8603515625, -1409.5849609375, 25.41367149353},
{-80.990234375, -1168.748046875, 1.9137362241745},
{-78.4560546875, -1132.7021484375, 0.78382074832916},
{-490.552734375, -562.1669921875, 25.129871368408},
{-1060.0361328125, -1296.4365234375, 128.90068054199},
{-1057.904296875, -1194.87890625, 128.88684082031},
{-1425.0791015625, -1472.7197265625, 101.3832244873},
{-1038.1123046875, -585.8369140625, 31.712774276733},
{-956.3916015625, -507.1025390625, 25.658903121948},
{-924.9091796875, -500.7744140625, 25.665790557861},
{-925.5654296875, -534.56640625, 25.6584815979},
}

local taxilvl_1 = {}
local taxilvl_2 = {}
local taxilvl_3 = {}
local taxilvl_4 = {}

local antycheat = {}
local wymagane_pg = 1500

function getTaxipoint()
	local ile = #taxi_gps
	local rng = math.random(1,ile)
	for i,v in ipairs(taxi_gps) do 
		if i == rng then
			return v
		end
	end
end

addCommandHandler("tptaxi", function(plr,cmd,value)
if getElementData(plr,"admin:poziom") >= 6 then
    if getElementData(plr,"admin:zalogowano") == "true" then
		if not tonumber(value) then
			outputChatBox("* Użycie: /tptaxi <ID>",plr)
			return 
		end
		local ilosc = #taxi_gps
		if tonumber(value) > tonumber(ilosc) then return end
		for i,v in ipairs(taxi_gps) do
		    if i == tonumber(value) then
			    setElementPosition(plr, v[1], v[2], v[3])
			end
		end
	end
	end
end)

function findCurs(data,plr,id)
	for i,v in ipairs(data) do 
		if i == id then
			return v
		end
	end
	return false
end

function findEmptyCarSeat(veh)
    local max = getVehicleMaxPassengers(veh)
    local pas = getVehicleOccupants(veh)
    for i=1, max do
        if not pas[i] then
        	return i
        end
    end
    return false
end

function findEmptySeat(veh)
    local pas = getVehicleOccupants(veh)
	local count = 0
    for i,v in ipairs(pas) do
        count = count + 1
    end
	return count
end

function delPed(gracz)
    ped=getElementsByType('ped')
    for i,v in pairs(ped) do
		if getElementData(v,"ped:taxiJOB") == getElementData(gracz,"player:dbid") then
		    destroyElement(v)
		end
    end	
end

function delMarker(gracz)
    marker=getElementsByType('colshape')
    for i,v in pairs(marker) do
		if getElementData(v,"TAXI:player") == getElementData(gracz,"player:dbid") then
		    destroyElement(v)
		end
    end	
	marker=getElementsByType('marker')
    for i,v in pairs(marker) do
		if getElementData(v,"TAXI:player") == getElementData(gracz,"player:dbid") then
		    destroyElement(v)
		end
    end	
end

function delBlip(gracz)
    blip=getElementsByType('blip')
    for i,v in pairs(blip) do
		if getElementData(v,"TAXI:player") == getElementData(gracz,"player:dbid") then
		    destroyElement(v)
		end
    end	
end


function losowanieKursowTaxo(type,id)
	if #taxilvl_1 < 29 then
		local point = getTaxipoint()
		local point2 = getTaxipoint()
		local odleglosc = getDistanceBetweenPoints3D(point2[1], point2[2], point2[3], point[1], point[2], point[3])
		if odleglosc > 250 and odleglosc < 2100 then
			--local cost = ( odleglosc * 0.95 + 1000 ) * 3;
			local rng_dd = math.random(1,1000)
			if rng_dd > 0 and rng_dd < 25 then
				mnz_duf = math.random(175,455)
			elseif rng_dd > 25 and rng_dd < 100 then
				mnz_duf = math.random(115,290)
			else
				mnz_duf = math.random(75,110)
			end
			
			local oddls = string.format("%.2f", odleglosc/345)
			local mnz = tonumber(oddls) + 1;
			local money = ( taxi_def_mn * mnz ) * mnz_duf; -- przykład: 25 * 1.5 = 37.5$ -- im dalej tym więcej kasy
			--local money2 = string.format("%.2f", money)
			
			local time = os.time(os.date("!*t"))
			local ulica = getZoneName(point[1], point[2], point[3], true)
			local ulica2 = getZoneName(point[1], point[2], point[3], false)
			if ulica == ulica2 then ulica2 = "" end
			local ulica22 = getZoneName(point2[1], point2[2], point2[3], true)
			local ulica222 = getZoneName(point2[1], point2[2], point2[3], false)
			if ulica22 == ulica222 then ulica222 = "" end
			
			local pokazdokad = math.random(0,1000);
			if pokazdokad >= 0 and pokazdokad < 88 then takczy = true; else takczy = false; end
			
			local pokazzaile = math.random(0,1000);
			if pokazzaile >= 0 and pokazzaile < 150 then tak11 = true; else tak11 = false; end
			
			if type then
				table.insert(taxilvl_1,id,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, id, point2[1], point2[2], point2[3], point[1], point[2], point[3], 1})
			else
				table.insert(taxilvl_1,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, (#taxilvl_1+1), point2[1], point2[2], point2[3], point[1], point[2], point[3], 1}) -- od 9 point
			end
			--outputChatBox("#841515✖#e7d9b0dodaje punkt "..#taxilvl_1..".", root,231, 217, 176,true)
			--klosowanieKursowTaxo()
		else
			losowanieKursowTaxo(type,id)
		end
	else
		if isTimer(liczeTAXI)then
			killTimer(liczeTAXI)
		end
	end
	if #taxilvl_2 < 21 then
		local point = getTaxipoint()
		local point2 = getTaxipoint()
		local odleglosc = getDistanceBetweenPoints3D(point2[1], point2[2], point2[3], point[1], point[2], point[3])
		if odleglosc > 1600 and odleglosc < 3700 then
			--local cost = ( odleglosc * 0.95 + 1000 ) * 3;
			local rng_dd = math.random(1,1000)
			if rng_dd > 0 and rng_dd < 25 then
				mnz_duf = math.random(175,455)
			elseif rng_dd > 25 and rng_dd < 100 then
				mnz_duf = math.random(115,290)
			else
				mnz_duf = math.random(75,110)
			end
			
			local rng_cln = math.random(1,2)
			
			local oddls = string.format("%.2f", odleglosc/345)
			local mnz = tonumber(oddls) + 1;
			local money = ( taxi_def_mn * mnz ) * mnz_duf; -- przykład: 25 * 1.5 = 37.5$ -- im dalej tym więcej kasy
			--local money2 = string.format("%.2f", money)
			
			local time = os.time(os.date("!*t"))
			local ulica = getZoneName(point[1], point[2], point[3], true)
			local ulica2 = getZoneName(point[1], point[2], point[3], false)
			if ulica == ulica2 then ulica2 = "" end
			local ulica22 = getZoneName(point2[1], point2[2], point2[3], true)
			local ulica222 = getZoneName(point2[1], point2[2], point2[3], false)
			if ulica22 == ulica222 then ulica222 = "" end
			
			local pokazdokad = math.random(0,1000);
			if pokazdokad >= 0 and pokazdokad < 88 then takczy = true; else takczy = false; end
			
			local pokazzaile = math.random(0,1000);
			if pokazzaile >= 0 and pokazzaile < 150 then tak11 = true; else tak11 = false; end
			
			if type then
				table.insert(taxilvl_2,id,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, id, point2[1], point2[2], point2[3], point[1], point[2], point[3], rng_cln})
			else
				table.insert(taxilvl_2,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, (#taxilvl_2+1), point2[1], point2[2], point2[3], point[1], point[2], point[3], rng_cln}) -- od 9 point
			end
			--outputChatBox("#841515✖#e7d9b0dodaje punkt "..#taxilvl_1..".", root,231, 217, 176,true)
			--klosowanieKursowTaxo()
		else
			losowanieKursowTaxo(type,id)
		end
	else
		if isTimer(liczeTAXI)then
			killTimer(liczeTAXI)
		end
	end
	if #taxilvl_3 < 21 then
		local point = getTaxipoint()
		local point2 = getTaxipoint()
		local odleglosc = getDistanceBetweenPoints3D(point2[1], point2[2], point2[3], point[1], point[2], point[3])
		if odleglosc > 2200 and odleglosc < 5500 then
			--local cost = ( odleglosc * 0.95 + 1000 ) * 3;
			local rng_dd = math.random(1,1000)
			if rng_dd > 0 and rng_dd < 25 then
				mnz_duf = math.random(225,555)
			elseif rng_dd > 25 and rng_dd < 100 then
				mnz_duf = math.random(198,390)
			else
				mnz_duf = math.random(109,190)
			end
			
			-- losowanie klientów
			local rng_cln = math.random(1,2)
			
			local oddls = string.format("%.2f", odleglosc/345)
			local mnz = tonumber(oddls) + 1;
			local money = ( ( taxi_def_mn * mnz ) * mnz_duf ) + 50; -- przykład: 25 * 1.5 = 37.5$ -- im dalej tym więcej kasy
			--local money2 = string.format("%.2f", money)
			
			local time = os.time(os.date("!*t"))
			local ulica = getZoneName(point[1], point[2], point[3], true)
			local ulica2 = getZoneName(point[1], point[2], point[3], false)
			if ulica == ulica2 then ulica2 = "" end
			local ulica22 = getZoneName(point2[1], point2[2], point2[3], true)
			local ulica222 = getZoneName(point2[1], point2[2], point2[3], false)
			if ulica22 == ulica222 then ulica222 = "" end
			
			local pokazdokad = math.random(0,1000);
			if pokazdokad >= 0 and pokazdokad < 88 then takczy = true; else takczy = false; end
			
			local pokazzaile = math.random(0,1000);
			if pokazzaile >= 0 and pokazzaile < 150 then tak11 = true; else tak11 = false; end
			
			if type then
				table.insert(taxilvl_3,id,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, id, point2[1], point2[2], point2[3], point[1], point[2], point[3], rng_cln})
			else
				table.insert(taxilvl_3,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, (#taxilvl_3+1), point2[1], point2[2], point2[3], point[1], point[2], point[3], rng_cln}) -- od 9 point
			end
			--outputChatBox("#841515✖#e7d9b0dodaje punkt "..#taxilvl_1..".", root,231, 217, 176,true)
			--klosowanieKursowTaxo()
		else
			losowanieKursowTaxo(type,id)
		end
	else
		if isTimer(liczeTAXI)then
			killTimer(liczeTAXI)
		end
	end
	if #taxilvl_4 < 22 then
		local point = getTaxipoint()
		local point2 = getTaxipoint()
		local odleglosc = getDistanceBetweenPoints3D(point2[1], point2[2], point2[3], point[1], point[2], point[3])
		if odleglosc > 3000 and odleglosc < 99999 then
			--local cost = ( odleglosc * 0.95 + 1000 ) * 3;
			local rng_dd = math.random(1,1000)
			if rng_dd > 0 and rng_dd < 25 then
				mnz_duf = math.random(325,955)
			elseif rng_dd > 25 and rng_dd < 100 then
				mnz_duf = math.random(258,490)
			else
				mnz_duf = math.random(149,290)
			end
			
			-- losowanie klientów
			local rng_cln = math.random(1,3)
			
			local oddls = string.format("%.2f", odleglosc/345)
			local mnz = tonumber(oddls) + 1;
			local money = ( ( taxi_def_mn * mnz ) * mnz_duf ) + 50; -- przykład: 25 * 1.5 = 37.5$ -- im dalej tym więcej kasy
			--local money2 = string.format("%.2f", money)
			
			local time = os.time(os.date("!*t"))
			local ulica = getZoneName(point[1], point[2], point[3], true)
			local ulica2 = getZoneName(point[1], point[2], point[3], false)
			if ulica == ulica2 then ulica2 = "" end
			local ulica22 = getZoneName(point2[1], point2[2], point2[3], true)
			local ulica222 = getZoneName(point2[1], point2[2], point2[3], false)
			if ulica22 == ulica222 then ulica222 = "" end
			
			local pokazdokad = math.random(0,1000);
			if pokazdokad >= 0 and pokazdokad < 88 then takczy = true; else takczy = false; end
			
			local pokazzaile = math.random(0,1000);
			if pokazzaile >= 0 and pokazzaile < 150 then tak11 = true; else tak11 = false; end
			
			if type then
				table.insert(taxilvl_4,id,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, id, point2[1], point2[2], point2[3], point[1], point[2], point[3], rng_cln})
			else
				table.insert(taxilvl_4,{odleglosc, ulica.." "..ulica2, ulica22.." "..ulica222, money, time, takczy, tak11, (#taxilvl_4+1), point2[1], point2[2], point2[3], point[1], point[2], point[3], rng_cln}) -- od 9 point
			end
			--outputChatBox("#841515✖#e7d9b0dodaje punkt "..#taxilvl_1..".", root,231, 217, 176,true)
			--klosowanieKursowTaxo()
		else
			losowanieKursowTaxo(type,id)
		end
	else
		if isTimer(liczeTAXI)then
			killTimer(liczeTAXI)
		end
	end
end
local liczeTAXI = setTimer(losowanieKursowTaxo, 15, 0, false, 0)

addEvent("TAXI:datalvl", true)
addEventHandler("TAXI:datalvl", root, function(plr,data)
	if data and plr then
		if tonumber(data) == 1 then
			setElementData(plr,"TAXI:datalvl",1)
			triggerClientEvent(plr, "TAXI:wstawTEest", plr, plr, taxilvl_1)
		elseif tonumber(data) == 2 then
			setElementData(plr,"TAXI:datalvl",2)
			triggerClientEvent(plr, "TAXI:wstawTEest", plr, plr, taxilvl_2)
		elseif tonumber(data) == 3 then
			setElementData(plr,"TAXI:datalvl",3)
			triggerClientEvent(plr, "TAXI:wstawTEest", plr, plr, taxilvl_3)
		elseif tonumber(data) == 4 then
			setElementData(plr,"TAXI:datalvl",4)
			triggerClientEvent(plr, "TAXI:wstawTEest", plr, plr, taxilvl_4)
		end
	end
end)


addEvent("TAXI:closethis", true)
addEventHandler("TAXI:closethis", root, function(plr, datalvl1, lvl)
	--outputChatBox("#841515 Brrchu.", plr,231, 217, 176,true)
	--iprint(taxilvl_1[datalvl1])
	local cheat = getElementData(plr,"player:job") or false
	if cheat then
		outputChatBox("#841515✖#e7d9b0 Jesteś w trakcie realizacji innego kursu.", plr,231, 217, 176,true)
		return 
	end
	local veh = getPedOccupiedVehicle(plr) or false
	if not veh then return end
	local data = getElementData(plr,"TAXI:datalvl") or 1
	--if not data then return end
	if data == 1 then
		testssss = findCurs(taxilvl_1,plr,datalvl1)
	elseif data == 2 then
		testssss = findCurs(taxilvl_2,plr,datalvl1)
	elseif data == 3 then
		testssss = findCurs(taxilvl_3,plr,datalvl1)
	elseif data == 4 then
		testssss = findCurs(taxilvl_4,plr,datalvl1)
	end
	if testssss then
		if antycheat[plr] and getTickCount() < antycheat[plr] then
			local odlicz_time = antycheat[plr] - getTickCount();
			local newtime = odlicz_time / 1000;
			local newtime = math.floor(newtime)
			outputChatBox("#841515✖#e7d9b0 Błąd, odczekaj #EBB85D"..newtime.."#e7d9b0 sekund, zanim rozpoczniesz ponownie pracę.", plr,231, 217, 176,true)
			return 
		end
		-- tutaj zaczynamy zlecenie tworzymy punkt docelowy itp...
		outputChatBox("#7AB4EAⒾ#e7d9b0 Odbierz klienta/ów z #EBB85D"..testssss[2].."#e7d9b0.", plr,231, 217, 176,true)
		--setElementData(plr,"player:jobCODE","TAXI")
		playSoundFrontEnd(plr, 20)
		--antycheat[plr] = getTickCount()+120000; -- 2 min zabezpieczenia
		
		trasa2 = createMarker(testssss[12], testssss[13], testssss[14], "checkpoint", 3, 255, 255, 255, 55, plr)
		trasa = createColSphere(testssss[12], testssss[13], testssss[14], 14)
		bliptrasy = createBlip(testssss[12], testssss[13], testssss[14], 12, 0, 0, 0, 0, 255, 1, 9000, plr)
		setElementData(trasa,"TAXI:player",getElementData(plr,"player:dbid"))
		setElementData(trasa2,"TAXI:player",getElementData(plr,"player:dbid"))
		
		setElementData(plr,"TAXI:kordyB",false)
		setElementData(plr,"TAXI:info",testssss)

		setElementData(bliptrasy,"TAXI:player",getElementData(plr,"player:dbid"))
		setElementData(plr,"player:job","TAXI")
		setElementData(veh,"vehicle:job","TAXI")
	
		-- remove kurs po odebraniu zlecenia
		local data = getElementData(plr,"TAXI:datalvl") or 1
		if data == 1 then
			table.remove(taxilvl_1, datalvl1)
			losowanieKursowTaxo(true,datalvl1)
		elseif data == 2 then
			table.remove(taxilvl_2, datalvl1)
			losowanieKursowTaxo(true,datalvl1)
		elseif data == 3 then
			table.remove(taxilvl_3, datalvl1)
			losowanieKursowTaxo(true,datalvl1)
		elseif data == 4 then
			table.remove(taxilvl_4, datalvl1)
			losowanieKursowTaxo(true,datalvl1)
		end
			--outputChatBox("#7AB4EAⒾ#e7d9b0 rem,ove."..data[datalvl1][8].." datalvl: "..datalvl1, plr,231, 217, 176,true)
	end
end)

addEventHandler("onColShapeHit", resourceRoot, function(el,md)
	if (not md) then return end
	local sprID = getElementData(source,"TAXI:player") or 0;
	if sprID > 0 then
		local uid = getElementData(el,"player:dbid") or 0;
		if uid > 0 then
			if sprID==uid then
				local spregzam = getElementData(el,"player:job") or false
				if spregzam == "TAXI" then
					if getElementType(el) ~= "player" then return end
					if isPedInVehicle(el) then
						local vehicle = getPedOccupiedVehicle(el) or false
						local veh_data = getElementData(vehicle,"vehicle:job") or false;
						if veh_data == "TAXI" then			
							setElementData(el,"TAXI:action",true)
							setElementData(el,"TAXI:marker",source)
						else
							outputChatBox("* Aby zakończyć zlecenie, musisz znajdować się w pojeździe służbowym.", el)
						end
					end
				end
			end
		end
	end
end)

addEventHandler("onColShapeLeave", resourceRoot, function(el,md)
	if (not md) then return end
	local sprID = getElementData(source,"TAXI:player") or 0;
	if sprID > 0 then
	local uid = getElementData(el,"player:dbid") or 0;
		if uid > 0 then
			if sprID==uid then
    			if getElementType(el) ~= "player" then return end	
				removeElementData(el,"TAXI:action")
				removeElementData(el,"TAXI:marker")
			end
		end
	end
end)

function startJobTaxi(plr)
	if plr then
		local vehicle = getPedOccupiedVehicle(plr) or false
		if vehicle then
			local cntr = getVehicleController(vehicle) or false
			if cntr ~= plr then return end
			local uid = getElementData(plr,"player:dbid") or 0;
			if uid > 0 then
				if vehicle then
					local plr_orgID = getElementData(plr,"player:orgID") or 0;
					local veh_id = getElementData(vehicle,"vehicle:id") or 0;
					local car = exports["aj-dbcon"]:wyb("SELECT * FROM server_vehicles WHERE ( veh_owner='"..uid.."' OR veh_groupowner='"..plr_orgID.."' ) AND veh_id='"..veh_id.."' AND veh_taxo='1'");
					if #car > 0 then
						resTart(plr)
						--outputChatBox("#388E00✔#e7d9b0 test.", plr,231, 217, 176,true)	
					else
						local data = getElementData(plr,"TAXI:datalvl") or 1
						if data == 1 then
							triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_1)
							setElementData(plr,"TAXI:datalvl",1)
						elseif data == 2 then
							triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_2)
							setElementData(plr,"TAXI:datalvl",2)
						elseif data == 3 then
							triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_3)
							setElementData(plr,"TAXI:datalvl",3)
						elseif data == 4 then
							triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_4)
							setElementData(plr,"TAXI:datalvl",4)
						end
					end
				end
			end
		end
	end
end

local blokadatymczasowa = {}

function podejmijzlecenie(plr)
	if isPedInVehicle(plr) then
		if blokadatymczasowa[plr] and getTickCount() < blokadatymczasowa[plr] then return end
		local vehicle = getPedOccupiedVehicle(plr) or false
		local carhp = getElementHealth(vehicle)
		local carlighthp1 = getVehicleLightState(vehicle, 0)
		local carlighthp2 = getVehicleLightState(vehicle, 1)
		local carmaska = getVehicleDoorState(vehicle, 0)
		local carbagaj = getVehicleDoorState(vehicle, 1)
		local dzwilp = getVehicleDoorState(vehicle, 2)
		local dzwipp = getVehicleDoorState(vehicle, 3)
		local dzwilt = getVehicleDoorState(vehicle, 4)
		local dzwipt = getVehicleDoorState(vehicle, 5)
		local carszyba = getVehiclePanelState(vehicle, 4)
		local carpz = getVehiclePanelState(vehicle, 5)
		local cartz = getVehiclePanelState(vehicle, 6)
		local veh_data = getElementData(vehicle,"vehicle:job") or false;
		local maks = getVehicleMaxPassengers(vehicle) or 0;
		local wolne = findEmptySeat(vehicle) or 0;
		blokadatymczasowa[plr] = getTickCount()+1000;
		if veh_data == "TAXI" then
		    local eleData = getElementData(plr,"TAXI:action") or false;
			if eleData then
				local donTifi = getElementData(plr,"TAXI:marker") or false;
				if donTifi ~= false then
					local uid = getElementData(plr,"player:dbid") or 0;
					-- tutaj odbieranie klienta
					local sx,sy,sz = getElementVelocity(vehicle)
					speed = (sx^2 + sy^2 + sz^2)^(0.5);
					kmh = speed*180;
					if tonumber(kmh) > 10 then 
						outputChatBox("#841515✖#e7d9b0 Najpierw zatrzymaj pojazd.",plr, 231, 217, 176,true)
						return
					end
					-- nadajemy pedi inside car
					local kordyB = getElementData(plr,"TAXI:kordyB") or false
					if kordyB then
						-- JESLI MAMY ZLECENIE DO ODDANIA
						-- TODO: nadanie kasy zakonczednie zlecenia
						--outputChatBox("#841515✖#e7d9b0 NIE DZIALA.",plr, 231, 217, 176,true)
						local info = getElementData(plr,"TAXI:info") or 0
						local cost = info[4] / 100;
						
						-- tablica danych :)
						local carhp = carhp;
						if carhp >= 952 then mnoznik = 1.00; end
						if carhp >= 855 and carhp < 952 then mnoznik = 0.96; end
						if carhp >= 700 and carhp < 855 then mnoznik = 0.92; end
						if carhp >= 575 and carhp < 700 then mnoznik = 0.88; end
						if carhp >= 450 and carhp < 575 then mnoznik = 0.83; end
						if carhp >= 301 and carhp < 450 then mnoznik = 0.77; end
						if carlighthp1 == 1 then mnoznik = mnoznik - 0.05; end
						if carlighthp2 == 1 then mnoznik = mnoznik - 0.05; end
						if carszyba ~= 0 then mnoznik = mnoznik - 0.05; end
						if carpz ~= 0 then mnoznik = mnoznik - 0.02; end
						if cartz ~= 0 then mnoznik = mnoznik - 0.03; end
						
						-- tutaj bonusy
						if carmaska == 0 then mnoznik = mnoznik + 0.04; end
						if carbagaj == 0 then mnoznik = mnoznik + 0.04; end
						if dzwilp == 0 then mnoznik = mnoznik + 0.03; end
						if dzwipp == 0 then mnoznik = mnoznik + 0.03; end
						if dzwilt == 0 then mnoznik = mnoznik + 0.02; end
						if dzwipt == 0 then mnoznik = mnoznik + 0.02; end
						if mnoznik > 1.00 then mnoznik2 = 1.00; else mnoznik2 = mnoznik; end
						local getcost = cost * mnoznik2;		
						
						-- bonus SERWEROWY
						mnoznik = mnoznik + global_premia;
						
						local special_ad = ".";
						if mnoznik > 1.00 then -- jesli wyniesie ponad 1.00 czyli domyslny max
							licz = tonumber(mnoznik) - 1;
							adcost = tonumber(getcost) * licz;
							adcost = string.format("%.2f", adcost)
							adcost = adcost + 0.01; -- taki bonus
							special_ad = " #EBB85D+ #388E00"..adcost.."$#e7d9b0 #EBB85Dpremii#e7d9b0."; 
						end
						
						local money2 = string.format("%.2f", getcost)
						--outputChatBox("#EBB85D"..message[2].."#ffffff: #e6e6e6"..message[3], el,231, 217, 176,true)
						
						local getPLRmoney = getPlayerMoney(plr)
						local nev_cost = (getcost*100);
						local prem_cost = (adcost*100) or 0;
						local sprvalue = getPLRmoney + nev_cost + prem_cost; -- *100 poniewaz kwota jest w centach
				
						-- PG
						local losowaniepg = math.random(1,1000)
						if losowaniepg >= 50 and losowaniepg < 150 then -- 10% szans
							local ilosc = math.random(1,4)
							local premium = getElementData(plr,"player:premium") or 0;
							if premium==1 then ilosc = ilosc * 2; end
				
							local tresc = "Dodatkowe punkty gry z pracy.";
							triggerClientEvent("onPlayerGetPG", plr, tresc, ilosc)
							-- nadajemy do bazy 
							local query = exports["aj-dbcon"]:upd("INSERT INTO server_pghistory SET pgh_admin=?, pgh_ilosc=?, pgh_data=NOW(), pgh_desc=?, pgh_foruser=?, pgh_job=1",22,ilosc,tresc,uid)
							local query = exports["aj-dbcon"]:upd("UPDATE server_users SET user_pg=user_pg+'"..ilosc.."' WHERE user_id='"..uid.."'")	
							local PGgraczaTeraaz = getElementData(plr,"player:PG");
							local nowePG = PGgraczaTeraaz + ilosc;
							setElementData(plr,"player:PG",nowePG)		
						end
				
						if 99999999 < sprvalue then 
							outputChatBox("#841515✖#e7d9b0 Błąd, gracz osiągną limit gotówki przy sobie!", plr,231, 217, 176,true) 
							removeElementData(plr,"TAXI:action")
							removeElementData(plr,"TAXI:marker")
							return 
						end
						-- test
						local nev_cost = nev_cost + prem_cost; -- sumujemy całosc z premia
						givePlayerMoney(plr, nev_cost)
						local query = exports["aj-dbcon"]:upd("UPDATE server_users SET user_money=user_money+"..nev_cost.." WHERE user_id = '"..uid.."'");
						local query = exports["aj-dbcon"]:upd("UPDATE server_users SET user_bankmoney=user_bankmoney+"..nev_cost.." WHERE user_id = '22'"); -- zapis
						
						local query = exports["aj-dbcon"]:upd("INSERT INTO server_logibankowe SET lbank_userid = '22', lbank_touserid = '"..uid.."', lbank_kwota='"..nev_cost.."', lbank_data=NOW(), lbank_desc='Praca dorywcza TAXI.', lbank_type='1'");
						local code = "TAXI_1";
						--joblog statystyka do poziomow etc
						local query = exports["aj-dbcon"]:upd("INSERT INTO server_jobslog SET joblog_code='"..code.."', joblog_data=NOW(), joblog_value='1', joblog_userid='"..uid.."'");
						outputChatBox("#388E00✔#e7d9b0 Otrzymano #388E00"..money2.."$#e7d9b0 za kurs"..special_ad, plr,231, 217, 176,true)
						
						-- dodatki
						removeElementData(plr,"TAXI:action")
						removeElementData(plr,"TAXI:marker")
						removeElementData(plr,"TAXI:info")
						removeElementData(plr,"player:job")
						removeElementData(vehicle,"vehicle:job")
						-- do usuwania peda uzyj: delPed(gracz)
						
						-- usuwamy jesli sie zgadza
						delMarker(plr)
						delBlip(plr)
						delPed(plr)
						triggerClientEvent(plr, "removeInfoTAXI", plr)
						
						setElementData(plr,"TAXI:kordyB",false)
					else
						-- JESLI NIE MAMY ZLECENIA
						local slots = getElementData(plr,"TAXI:info")
						if (tonumber(wolne)+slots[15]) > tonumber(maks) then 
							outputChatBox("#841515✖#e7d9b0 Brak miejsca w aucie.",plr, 231, 217, 176,true)
							return
						end
						
						--0 NADJ KURS DALEJ
						-- nadajemy pedi inside car
						local maks = getVehicleMaxPassengers(vehicle)
						local wolne = findEmptySeat(vehicle)
						if (tonumber(wolne)+slots[15]) <= tonumber(maks) then
							if slots[15] == 2 then 
								local seat = findEmptyCarSeat(vehicle)
								if seat then
									klient = createPed(math.random(9,41), 0, 0, -30, 0)
									setElementData(klient,"ped:name","Pasażer")
									warpPedIntoVehicle(klient, vehicle, seat)
									setElementData(klient,"ped:taxiJOB",uid) -- nadajemy mu uID gracza
								end
								local seat = findEmptyCarSeat(vehicle)
								if seat then
									klient = createPed(math.random(9,41), 0, 0, -30, 0)
									setElementData(klient,"ped:name","Pasażer")
									warpPedIntoVehicle(klient, vehicle, seat)
									setElementData(klient,"ped:taxiJOB",uid) -- nadajemy mu uID gracza
								end
							elseif slots[15] == 3 then 
								local seat = findEmptyCarSeat(vehicle)
								if seat then
									klient = createPed(math.random(9,41), 0, 0, -30, 0)
									setElementData(klient,"ped:name","Pasażer")
									warpPedIntoVehicle(klient, vehicle, seat)
									setElementData(klient,"ped:taxiJOB",uid) -- nadajemy mu uID gracza
								end
								local seat = findEmptyCarSeat(vehicle)
								if seat then
									klient = createPed(math.random(9,41), 0, 0, -30, 0)
									setElementData(klient,"ped:name","Pasażer")
									warpPedIntoVehicle(klient, vehicle, seat)
									setElementData(klient,"ped:taxiJOB",uid) -- nadajemy mu uID gracza
								end
								local seat = findEmptyCarSeat(vehicle)
								if seat then
									klient = createPed(math.random(9,41), 0, 0, -30, 0)
									setElementData(klient,"ped:name","Pasażer")
									warpPedIntoVehicle(klient, vehicle, seat)
									setElementData(klient,"ped:taxiJOB",uid) -- nadajemy mu uID gracza
								end
							else
								local seat = findEmptyCarSeat(vehicle)
								if seat then
									klient = createPed(math.random(9,41), 0, 0, -30, 0)
									setElementData(klient,"ped:name","Pasażer")
									warpPedIntoVehicle(klient, vehicle, seat)
									setElementData(klient,"ped:taxiJOB",uid) -- nadajemy mu uID gracza
								end
							end
							-- dodatki
							removeElementData(plr,"TAXI:action")
							removeElementData(plr,"TAXI:marker")
							-- do usuwania peda uzyj: delPed(gracz)
							
							-- usuwamy jesli sie zgadza
							delMarker(plr)
							delBlip(plr)
							triggerClientEvent(plr, "removeInfoTAXI", plr)
							
							setElementData(plr,"TAXI:kordyB",true)
							---// NEXT POINt
							local taxi = getElementData(plr,"TAXI:info") or false
							if taxi then
								trasa2 = createMarker(taxi[9], taxi[10], taxi[11], "checkpoint", 3, 255, 255, 255, 55, plr)
								trasa = createColSphere(taxi[9], taxi[10], taxi[11], 14)
								bliptrasy = createBlip(taxi[9], taxi[10], taxi[11], 12, 0, 0, 0, 0, 255, 1, 9000, plr)
								setElementData(trasa,"TAXI:player",getElementData(plr,"player:dbid"))
								setElementData(trasa2,"TAXI:player",getElementData(plr,"player:dbid"))
								setElementData(bliptrasy,"TAXI:player",getElementData(plr,"player:dbid"))
								
								outputChatBox("#7AB4EAⒾ#e7d9b0 Przetransportuj klienta/ów do #EBB85D"..taxi[3].."#e7d9b0.", plr,231, 217, 176,true)
							end
						end
						
					end
				end
			end
		end
	end
end

function resTart(plr)
    local uid = getElementData(plr,"player:dbid") or 0;
	if uid > 0 then
	    local vehicle = getPedOccupiedVehicle(plr) or false
		if vehicle then
			local jobCode = getElementData(vehicle,"vehicle:job") or false
			local kiero = getVehicleOccupant(vehicle) or false
			local owner = getElementData(vehicle,"vehicle:owner") or 0;
			local groupowner = getElementData(vehicle,"vehicle:groupowner") or 0;
			local plr_orgID = getElementData(plr,"player:orgID") or 0;
			if kiero==plr and ( owner==uid or groupowner==plr_orgID ) then
				local duty = getElementData(plr,"player:frakcja") or false;
				if duty then
--					cancelEvent()
					return 
				end
				local licens = exports["aj-dbcon"]:wyb("SELECT * FROM server_users WHERE user_id=? AND user_EXtaxi=1",uid);
				if #licens == 0 then
					outputChatBox("#841515✖#e7d9b0 Aby rozpocząć tutaj pracę, musisz zdać egzamin teorytyczny w urzędzie.", plr,231, 217, 176,true)
					return
				end
				local PG = getElementData(plr,"player:PG") or 0;
				if PG < wymagane_pg then
					outputChatBox("#841515✖#e7d9b0 Posiadasz niewystarczającą ilość PG, aby rozpocząć tutaj pracę.", plr,231, 217, 176,true)
					return 
				end
				local data = getElementData(plr,"TAXI:datalvl") or 1
				if data == 1 then
					triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_1)
					setElementData(plr,"TAXI:datalvl",1)
				elseif data == 2 then
					triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_2)
					setElementData(plr,"TAXI:datalvl",2)
				elseif data == 3 then
					triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_3)
					setElementData(plr,"TAXI:datalvl",3)
				elseif data == 4 then
					triggerClientEvent(plr, "TAXI:showGUI", plr, taxilvl_4)
					setElementData(plr,"TAXI:datalvl",4)
				end
			end
		end
	end
end


local taxi1_test_vis = createMarker(2810.9296875, 1986.5068359375, 10.8203125-1, "cylinder", 2, 255,255,255,50)
local taxi1_test = createColSphere(2810.9296875, 1986.5068359375, 10.8203125, 1)
    setElementInterior(taxi1_test, 0)
	setElementDimension(taxi1_test, 0)
	local t = createElement("text")
	setElementData(t,"name","Praca TAXI")
	setElementData(t,"scale",1)
	setElementData(t,"distance",22)
	setElementPosition(t,2810.9296875, 1986.5068359375, 10.8203125+1.6)
	-- rejestracja taxi
	local t = createElement("text")
	setElementData(t,"name","Rejestracja pojazdów TAXI")
	setElementData(t,"scale",1)
	setElementData(t,"distance",22)
	setElementPosition(t, 2785.9296875, 2012.1962890625, 10.510445594788+3.6)
	local t = createElement("text")
	setElementData(t,"name","Komputer")
	setElementData(t,"scale",1)
	setElementData(t,"distance",22)
	setElementPosition(t, 2793.6630859375, 2014.3095703125, 10.804744720459+1)
local ajoneatsrespfure1 = createColCuboid(2779.791015625, 1968.8232421875, 10.8203125-1, 10, 5, 4)

-- other script
local rejestracja_taxo = createColCuboid(2781.9482421875, 2004.98046875, 10.811841964722-1, 8, 10, 4)
local marker_taxo = createMarker(2793.6630859375, 2014.3095703125, 10.804744720459-2, "cylinder", 2, 255,255,255,50)
local intomarker_taxo = createColSphere(2793.6630859375, 2014.3095703125, 10.804744720459, 1)

addEventHandler("onColShapeHit", intomarker_taxo, function(el,md)
	if not md then return end
    if getElementType(el) ~= "player" then return end
    if isPedInVehicle(el) then return end
    local uid = getElementData(el,"player:dbid")
    if not uid then return end
	local pojazdy = getElementsWithinColShape(rejestracja_taxo,"vehicle")
	if #pojazdy<1 then
		outputChatBox("#841515✖#e7d9b0 Na stanowisku nie ma żadnego pojazdu.", el,231, 217, 176,true)
		return
	end
	if #pojazdy>1 then
		outputChatBox("#841515✖#e7d9b0 Na stanowisku jest zbyt dużo pojazdów.", el,231, 217, 176,true)
		return
	end
	local veh = pojazdy[1]
	local maks = getVehicleMaxPassengers(veh) or 0;
	if maks <= 2 then
		outputChatBox("#841515✖#e7d9b0 Pojazd nie spełnia minimalnych wymagań pojemności.", el,231, 217, 176,true)
		return
	end
	local owner = getElementData(veh,"vehicle:owner") or 0;
	if owner ~= uid then
		outputChatBox("#841515✖#e7d9b0 Tylko właściciel pojazdu, może rejestrować pojazd.", el,231, 217, 176,true)
		return
	end
	setElementData(el,"TAXO:code",true)
	setElementData(el,"TAXO:codeCAR",veh)
	outputChatBox("#7AB4EAⒾ#e7d9b0 Aby zarejestrować auto, wpisz #EBB85D/przegladtaxi#e7d9b0, koszt #388E005000.00$#e7d9b0.", el,231, 217, 176,true)
end)

addEventHandler("onColShapeLeave", intomarker_taxo, function(el,md)
	if not md then return end
    if getElementType(el) ~= "player" then return end
    local uid = getElementData(el,"player:dbid")
    if not uid then return end
	removeElementData(el,"TAXO:code")
	removeElementData(el,"TAXO:codeCAR")
end)


addCommandHandler("przegladtaxi", function(plr,cmd)
    local uid = getElementData(plr,"player:dbid") or 0;
	if uid > 0 then
		local codePP = getElementData(plr,"TAXO:code") or false;
		if codePP then
			local veh = getElementData(plr,"TAXO:codeCAR") or false;
			if veh then
				local getmoney = getPlayerMoney(plr)
				local cost = 5000 * 100;
				if getmoney < cost then
					outputChatBox("#841515✖#e7d9b0 Nie posiadasz tyle gotówki.", plr,231, 217, 176,true)
					return
				end
				local veh_id = getElementData(veh,"vehicle:id") or 0;
				local car = exports["aj-dbcon"]:wyb("SELECT * FROM server_vehicles WHERE veh_owner='"..uid.."' AND veh_id='"..veh_id.."' AND veh_taxo='1'");
				if #car == 0 then
					-- jesli nie ma taxo
					outputChatBox("#388E00✔#e7d9b0 Pomyślnie zarejestrowano pojazd, wpisz #EBB85D/taxi#e7d9b0 w aucie, aby rozpocząć pracę.", plr,231, 217, 176,true)
					removeElementData(plr,"TAXO:code")
					removeElementData(plr,"TAXO:codeCAR")
					takePlayerMoney(plr, cost)
					local query = exports["aj-dbcon"]:upd("UPDATE server_vehicles SET veh_taxo='1' WHERE veh_id=?",veh_id);
					local query = exports["aj-dbcon"]:upd("UPDATE server_users SET user_money=user_money-'"..cost.."' WHERE user_id=?",uid);
					local query = exports["aj-dbcon"]:upd("UPDATE server_users SET user_bankmoney=user_bankmoney+"..cost.." WHERE user_id = '22'"); -- zapis
					local query = exports["aj-dbcon"]:upd("INSERT INTO server_logibankowe SET lbank_userid='"..uid.."', lbank_touserid='22', lbank_kwota='"..cost.."', lbank_data=NOW(), lbank_desc='Rejestracja pojazdu TAXI.', lbank_type='1'");
				else
					--0 jesli ma taxo lub nie da sie wykonac
					outputChatBox("#841515✖#e7d9b0 Ten pojazd jest już zarejestrowany jako TAXI.", plr,231, 217, 176,true)
				end
			end
		end
	end
end)

-- fix
function bindytaxi(plr, seat, jacked)
    if seat ~= 0 then return end
	if source then
		--
		bindKey(plr, "k", "down", startJobTaxi, plr)
		bindKey(plr, "h", "down", podejmijzlecenie, plr)
	end
end
addEventHandler("onVehicleEnter", root, bindytaxi)


-- ending
function przerwijJob(plr, seat, jacked)
    if seat ~= 0 then return end
	if source then
		local jobCode = getElementData(source,"vehicle:job") or false;
		if jobCode == "TAXI" then
			delBlip(plr)
			delMarker(plr)
			delPed(plr)
			
			removeElementData(source,"vehicle:jobPRIVATE")
			removeElementData(source,"vehicle:job")

			antycheat[plr] = getTickCount()+120000; -- 2 min zabezpieczenia
			removeElementData(plr,"job:cost")
			removeElementData(plr,"player:jobCOLOR");
			removeElementData(plr,"TAXI:action")
			removeElementData(plr,"TAXI:marker")
			removeElementData(plr,"player:job")
			triggerClientEvent(plr, "removeInfoTAXI", plr)
			
			outputChatBox("#841515✖#e7d9b0 Praza została przerwana.", plr,231, 217, 176,true)
		end
		unbindKey(plr, "k", "down", startJobTaxi)
		unbindKey(plr, "h", "down", podejmijzlecenie)
	end
end
addEventHandler("onVehicleExit", root, przerwijJob)


addEvent("TAXI:endJob", true)
addEventHandler("TAXI:endJob", root, function(plr)
	przerwijJob(plr)
end)

function przerwijJob(plr)
    local uid = getElementData(plr,"player:dbid") or 0;
	if uid > 0 then
		local job = getElementData(plr,"player:job") or false;
		if job then
			delBlip(plr)
			delMarker(plr)
			delPed(plr)
			removeElementData(plr,"job:cost")
			removeElementData(plr,"TAXI:action")
			removeElementData(plr,"TAXI:marker")
			removeElementData(plr,"player:job")
			removeElementData(plr,"player:jobCOLOR");
			local vehicle = getPedOccupiedVehicle(plr) or false
			if vehicle then
				local kiero = getVehicleOccupant(vehicle) or false
				if kiero==plr then
					local jobCode = getElementData(vehicle,"vehicle:job") or false;
					if jobCode == "TAXI" then
						removeElementData(vehicle,"vehicle:jobPRIVATE")
						removeElementData(vehicle,"vehicle:job")
					end
				end
			end
			outputChatBox("#841515✖#e7d9b0 Praza została przerwana.", source,231, 217, 176,true)
		end
	end
end

addEventHandler("onPlayerWasted",root,function(totalAmmo,killer,killerWeapon,bodypart,stealth)
    local uid = getElementData(source,"player:dbid") or 0;
	if uid > 0 then
		local job = getElementData(source,"player:job") or false;
		if job then
			delBlip(source)
			delMarker(source)
			delPed(source)
			removeElementData(source,"job:cost")
			removeElementData(source,"TAXI:action")
			removeElementData(source,"TAXI:marker")
			removeElementData(source,"player:job")
			removeElementData(source,"player:jobCOLOR");
			local vehicle = getPedOccupiedVehicle(source) or false
			if vehicle then
				local kiero = getVehicleOccupant(vehicle) or false
				if kiero==source then
					local jobCode = getElementData(vehicle,"vehicle:job") or false;
					if jobCode == "TAXI" then
						removeElementData(vehicle,"vehicle:jobPRIVATE")
						removeElementData(vehicle,"vehicle:job")
					end
				end
			end
			unbindKey(plr, "k", "down", startJobTaxi)
			unbindKey(plr, "h", "down", podejmijzlecenie)
			outputChatBox("#841515✖#e7d9b0 Praza została przerwana.", source,231, 217, 176,true)
		end
	end
end)


function quitPlayer() -- jak wyjdzie / connection lost ?
    local uid = getElementData(source,"player:dbid") or 0;
	if uid > 0 then
	    local vehicle = getPedOccupiedVehicle(source) or false
		if vehicle then
		local kiero = getVehicleOccupant(vehicle) or false
		if kiero==source then
			local jobCode = getElementData(vehicle,"vehicle:job") or false;
			if jobCode == "TAXI" then
				delBlip(source)
				delMarker(source)
				delPed(source)
				
				removeElementData(vehicle,"vehicle:jobPRIVATE")
				removeElementData(vehicle,"vehicle:job")

				antycheat[source] = getTickCount()+120000; -- 2 min zabezpieczenia
				removeElementData(source,"job:cost")
				removeElementData(source,"player:jobCOLOR");
				removeElementData(source,"TAXI:action")
				removeElementData(source,"TAXI:marker")
				removeElementData(source,"player:job")
				triggerClientEvent(source, "removeInfoTAXI", source)
			end
		end
		end
	end
end
addEventHandler("onPlayerQuit", root, quitPlayer)